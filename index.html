<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>Expert PCB Artwork Simulator v1.1</title>
    <style>
        body { background-color: #1a1a1a; color: #00ff00; font-family: 'Courier New', monospace; display: flex; flex-direction: column; align-items: center; padding-top: 20px; }
        .canvas-container { position: relative; border: 3px solid #444; border-radius: 8px; overflow: hidden; }
        canvas { background-color: #002200; display: block; }
        .controls { margin-top: 20px; padding: 20px; background: #2a2a2a; border-radius: 10px; border: 1px solid #444; }
        button { font-size: 1.1rem; padding: 12px 24px; margin: 0 10px; cursor: pointer; border: none; border-radius: 5px; font-weight: bold; transition: 0.2s; }
        .btn-draw { background-color: #cc6600; color: white; }
        .btn-clear { background-color: #444; color: #ccc; }
        button:hover { transform: scale(1.05); filter: brightness(1.2); }
        .status-bar { margin-top: 10px; color: #888; font-size: 0.9rem; }
    </style>
</head>
<body>

    <h2>PCB ARTWORK EXPERT SYSTEM</h2>
    
    <div class="canvas-container">
        <canvas id="pcbCanvas" width="800" height="400"></canvas>
    </div>

    <div class="controls">
        <button class="btn-draw" onclick="runArtwork()">아트웍 설계 시작</button>
        <button class="btn-clear" onclick="initBoard()">보드 초기화</button>
    </div>
    <div class="status-bar" id="status">Status: Waiting for command...</div>

<script>
    const canvas = document.getElementById('pcbCanvas');
    const ctx = canvas.getContext('2d');
    const status = document.getElementById('status');

    // 설계 색상 규격 (Standard PCB Palette)
    const COLORS = {
        board: "#003300",
        grid: "#004400",
        pad: "#FFD700",    // Gold Pad
        trace: "#FF8C00",  // Copper Trace
        silk: "#FFFFFF"    // Silkscreen
    };

    // 1. 보드 초기화 및 그리드 생성
    function initBoard() {
        ctx.fillStyle = COLORS.board;
        ctx.fillRect(0, 0, canvas.width, canvas.height);
        
        // Grid 렌더링 (10mm 단위 가정)
        ctx.strokeStyle = COLORS.grid;
        ctx.lineWidth = 1;
        for(let x=0; x<canvas.width; x+=20) {
            ctx.beginPath(); ctx.moveTo(x, 0); ctx.lineTo(x, canvas.height); ctx.stroke();
        }
        for(let y=0; y<canvas.height; y+=20) {
            ctx.beginPath(); ctx.moveTo(0, y); ctx.lineTo(canvas.width, y); ctx.stroke();
        }
        status.innerText = "Status: Board Initialized. Ready to route.";
    }

    // 2. 부품 패드 그리기 함수
    function drawPad(x, y, w, h, name) {
        ctx.fillStyle = COLORS.pad;
        ctx.fillRect(x - w/2, y - h/2, w, h);
        
        ctx.fillStyle = COLORS.silk;
        ctx.font = "bold 12px Arial";
        ctx.textAlign = "center";
        ctx.fillText(name, x, y - h/2 - 8);
    }

    // 3. 배선(Trace) 그리기 함수
    function drawTrace(x1, y1, x2, y2, width) {
        ctx.beginPath();
        ctx.strokeStyle = COLORS.trace;
        ctx.lineWidth = width;
        ctx.lineCap = "round";
        ctx.moveTo(x1, y1);
        ctx.lineTo(x2, y2);
        ctx.stroke();
    }

    // 4. 메인 실행 함수
    function runArtwork() {
        initBoard(); // 먼저 비우고 시작
        status.innerText = "Status: Routing in progress...";

        // --- 부품 배치 (Placement) ---
        // J1: 2핀 커넥터
        drawPad(100, 150, 30, 30, "J1-1 (VCC)");
        drawPad(100, 250, 30, 30, "J1-2 (GND)");
        
        // R1: SMD 2012 저항 (중간 배치)
        drawPad(300, 150, 20, 25, "R1-1");
        drawPad(350, 150, 20, 25, "R1-2");
        
        // D1: SMD LED (우측 배치)
        drawPad(550, 150, 20, 25, "LED-A");
        drawPad(600, 150, 20, 25, "LED-K");

        // --- 배선 (Routing) ---
        // Trace 1: VCC -> Resistor
        setTimeout(() => {
            drawTrace(115, 150, 290, 150, 8);
            status.innerText = "Status: VCC Line Routed.";
        }, 500);

        // Trace 2: Resistor -> LED
        setTimeout(() => {
            drawTrace(360, 150, 540, 150, 8);
            status.innerText = "Status: Signal Line Routed.";
        }, 1000);

        // Trace 3: LED -> GND (L-shape Routing)
        setTimeout(() => {
            ctx.beginPath();
            ctx.strokeStyle = COLORS.trace;
            ctx.lineWidth = 8;
            ctx.moveTo(610, 150);
            ctx.lineTo(700, 150); // 오른쪽으로 꺾고
            ctx.lineTo(700, 320); // 아래로 내려서
            ctx.lineTo(100, 320); // 다시 왼쪽으로
            ctx.lineTo(100, 265); // GND 패드로 연결
            ctx.stroke();
            status.innerText = "Status: Ground Return Path Completed.";
        }, 1500);
    }

    // 시작 시 보드 초기화 호출
    window.onload = initBoard;

</script>
</body>
</html>
