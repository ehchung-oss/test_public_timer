<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>Half-Bridge 4-Layer PCB Layout Visualizer</title>
    <style>
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; display: flex; flex-direction: column; align-items: center; background-color: #2c3e50; color: white; }
        #app-container { display: flex; gap: 20px; padding: 20px; background: #34495e; border-radius: 12px; margin-top: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.5); }
        .controls { width: 300px; display: flex; flex-direction: column; gap: 15px; background: rgba(0,0,0,0.2); padding: 15px; border-radius: 8px; }
        .pcb-canvas { background: #1a1a1a; border: 2px solid #555; border-radius: 4px; position: relative; width: 600px; height: 400px; overflow: hidden; }
        svg { width: 100%; height: 100%; }
        .layer-control { display: flex; align-items: center; justify-content: space-between; }
        input[type="range"] { width: 100px; }
        h2 { margin: 10px 0; font-size: 1.2em; color: #ecf0f1; border-bottom: 1px solid #7f8c8d; padding-bottom: 5px; }
        .legend { font-size: 0.8em; margin-top: 10px; line-height: 1.6; }
        .desc { max-width: 800px; margin-top: 20px; line-height: 1.6; color: #bdc3c7; }
        span.color-box { display: inline-block; width: 12px; height: 12px; border-radius: 2px; margin-right: 5px; }
    </style>
</head>
<body>

<h1>Power Electronics PCB Layout Strategy</h1>

<div id="app-container">
    <div class="controls">
        <h2>Layer Visibility</h2>
        <div class="layer-control">
            <label><span class="color-box" style="background:#e74c3c"></span>L1 (Top - Power)</label>
            <input type="checkbox" id="l1-vis" checked>
            <input type="range" id="l1-op" min="0" max="1" step="0.1" value="1">
        </div>
        <div class="layer-control">
            <label><span class="color-box" style="background:#3498db"></span>L2 (Inner - GND)</label>
            <input type="checkbox" id="l2-vis" checked>
            <input type="range" id="l2-op" min="0" max="1" step="0.1" value="0.4">
        </div>
        <div class="layer-control">
            <label><span class="color-box" style="background:#2ecc71"></span>L3 (Inner - Gate)</label>
            <input type="checkbox" id="l3-vis" checked>
            <input type="range" id="l3-op" min="0" max="1" step="0.1" value="0.4">
        </div>
        <div class="layer-control">
            <label><span class="color-box" style="background:#9b59b6"></span>L4 (Bottom - Aux)</label>
            <input type="checkbox" id="l4-vis" checked>
            <input type="range" id="l4-op" min="0" max="1" step="0.1" value="0.4">
        </div>

        <h2>Layout Strategy</h2>
        <div class="legend">
            <strong>1. Sandwich:</strong> L1(VDC+)ì™€ L2(GND) ë©´ì„ í¬ê°œì–´ ì¸ë•í„´ìŠ¤ ìƒì‡„.<br>
            <strong>2. Switching Node:</strong> HS Sourceì™€ LS Drain ì‚¬ì´ ë©´ì ì„ ìµœì†Œí™”.<br>
            <strong>3. DC-Link:</strong> M5 ì…ë ¥ì—ì„œ MLCCê°€ MOSFETì— ê°€ì¥ ê°€ê¹ê²Œ ë°°ì¹˜.
        </div>
    </div>

    <div class="pcb-canvas">
        <svg id="pcb-svg" viewBox="0 0 600 400">
            <rect x="10" y="10" width="580" height="380" fill="#143d1f" stroke="#fff" stroke-width="2" />
            
            <g id="layer-l2" opacity="0.4">
                <rect x="50" y="50" width="500" height="300" fill="#3498db" />
                <text x="60" y="70" fill="white" font-size="12">L2: GND Plane (Sandwich Base)</text>
            </g>

            <g id="layer-l1" opacity="1">
                <circle cx="50" cy="100" r="15" fill="#e74c3c" />
                <text x="40" y="80" fill="#e74c3c" font-size="10">VDC+(M5)</text>
                
                <rect x="50" y="90" width="350" height="20" fill="#e74c3c" />
                
                <circle cx="150" cy="100" r="20" fill="none" stroke="#e74c3c" stroke-width="3" /> <rect x="250" y="90" width="30" height="20" fill="#e74c3c" /> <text x="245" y="80" fill="white" font-size="10">MLCC</text>

                <g transform="translate(400, 80)">
                    <rect x="0" y="0" width="60" height="80" fill="rgba(255,255,255,0.1)" stroke="white"/>
                    <text x="5" y="15" fill="white" font-size="10">HS MOSFET</text>
                    <circle cx="10" cy="60" r="4" fill="#f1c40f" /> <circle cx="20" cy="60" r="4" fill="#2ecc71" /> <circle cx="30" cy="60" r="4" fill="#e67e22" /> <circle cx="45" cy="30" r="6" fill="#e74c3c" /> </g>

                <path d="M 430 140 L 430 200 L 445 230" fill="none" stroke="#f39c12" stroke-width="12" />
                <text x="450" y="180" fill="#f39c12" font-size="12">Switching Node</text>

                <g transform="translate(400, 230)">
                    <rect x="0" y="0" width="60" height="80" fill="rgba(255,255,255,0.1)" stroke="white"/>
                    <text x="5" y="15" fill="white" font-size="10">LS MOSFET</text>
                    <circle cx="10" cy="60" r="4" fill="#f1c40f" /> <circle cx="20" cy="60" r="4" fill="#2ecc71" /> <circle cx="30" cy="60" r="4" fill="#3498db" /> <circle cx="45" cy="30" r="6" fill="#f39c12" /> </g>
            </g>

            <g id="layer-l3" opacity="0.4">
                <path d="M 420 290 Q 350 290 300 290" fill="none" stroke="#2ecc71" stroke-width="3" />
                <text x="310" y="280" fill="#2ecc71" font-size="10">L3: Gate Return</text>
            </g>
        </svg>
    </div>
</div>

<div class="desc">
    <h3>ğŸ’¡ êµìˆ˜ë‹˜ ê°€ì´ë“œ:</h3>
    <ul>
        <li><strong>ìƒŒë“œìœ„ì¹˜ êµ¬ì¡°:</strong> L1(ë¹¨ê°„ìƒ‰ $V_{DC}+$) ë°”ë¡œ ì•„ë˜ì— L2(íŒŒë€ìƒ‰ GND) ë©´ì´ ë„“ê²Œ ê¹”ë ¤ìˆìŒì„ í™•ì¸ì‹œí‚¤ì„¸ìš”. ìƒí•˜ í‰ë©´ì´ ê²¹ì¹˜ë©´ì„œ ë£¨í”„ ì¸ë•í„´ìŠ¤ê°€ ê¸‰ê°í•©ë‹ˆë‹¤.</li>
        <li><strong>Switching Node (í™©ìƒ‰):</strong> í•˜ì´ ì‚¬ì´ë“œ ì†ŒìŠ¤ì™€ ë¡œìš° ì‚¬ì´ë“œ ë“œë ˆì¸ì„ ì‡ëŠ” êµ¬ê°„ì…ë‹ˆë‹¤. ì´ êµ¬ê°„ì˜ ë©´ì ì„ ì¤„ì—¬ì•¼ ë…¸ì´ì¦ˆ ë°©ì‚¬ë¥¼ ë§‰ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</li>
        <li><strong>ì»´í¬ë„ŒíŠ¸ ë°°ì¹˜:</strong> ì „ë¥˜ëŠ” ì™¼ìª½(M5 ì»¤ë„¥í„°)ì—ì„œ ë“¤ì–´ì™€ MLCCë¥¼ ê±°ì³ ì˜¤ë¥¸ìª½ MOSFETìœ¼ë¡œ ê°‘ë‹ˆë‹¤. MLCCê°€ MOSFET í•€ì— ì–¼ë§ˆë‚˜ 'ë°”ì§' ë¶™ì–´ìˆëŠ”ì§€ ë³´ì—¬ì£¼ì„¸ìš”.</li>
    </ul>
</div>

<script>
    const layers = ['l1', 'l2', 'l3', 'l4'];
    layers.forEach(l => {
        const checkbox = document.getElementById(`${l}-vis`);
        const slider = document.getElementById(`${l}-op`);
        const group = document.getElementById(`layer-${l}`);

        checkbox.addEventListener('change', () => {
            group.style.display = checkbox.checked ? 'inline' : 'none';
        });

        slider.addEventListener('input', () => {
            group.setAttribute('opacity', slider.value);
        });
    });
</script>

</body>
</html>
