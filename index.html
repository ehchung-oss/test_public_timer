<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>High-Precision Half-Bridge Artwork Manager</title>
    <style>
        :root {
            --color-l1: #ff0000; /* Top - Red */
            --color-l2: #00ffff; /* In1 - Cyan */
            --color-l3: #ff00ff; /* In2 - Magenta */
            --color-l4: #ffff00; /* Bot - Yellow */
            --color-silk: #ffffff; /* Silkscreen - White */
        }
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: #1a1a1a; color: #fff; margin: 0; display: flex; }
        #control-panel { width: 320px; background: #252525; padding: 20px; border-right: 1px solid #444; height: 100vh; overflow-y: auto; }
        #canvas-area { flex-grow: 1; display: flex; align-items: center; justify-content: center; background: #000; }
        .layer-box { margin-bottom: 10px; padding: 10px; border: 1px solid #444; border-radius: 4px; }
        label { display: flex; align-items: center; cursor: pointer; font-weight: bold; }
        input[type="checkbox"] { margin-right: 10px; width: 18px; height: 18px; }
        .opacity-slider { width: 100%; margin-top: 5px; }
        svg { background: #0c1a10; border: 2px solid #333; }
        .desc { font-size: 0.85em; color: #aaa; margin-top: 5px; line-height: 1.4; }
        .legend-dot { width: 10px; height: 10px; display: inline-block; margin-right: 5px; border-radius: 2px; }
        h2 { color: #ffd700; font-size: 1.2em; border-bottom: 2px solid #ffd700; padding-bottom: 5px; }
    </style>
</head>
<body>

<div id="control-panel">
    <h2>PCB Layer Manager</h2>
    
    <div class="layer-box">
        <label style="color:var(--color-l1)"><input type="checkbox" id="btnL1" checked onchange="render()"> Layer 1 (Top)</label>
        <input type="range" id="opL1" class="opacity-slider" min="0" max="100" value="80" oninput="render()">
        <div class="desc">Vdc+, Gate Signal, Main Component Pads</div>
    </div>

    <div class="layer-box">
        <label style="color:var(--color-l2)"><input type="checkbox" id="btnL2" checked onchange="render()"> Layer 2 (Inner 1)</label>
        <input type="range" id="opL2" class="opacity-slider" min="0" max="100" value="40" oninput="render()">
        <div class="desc">Vdc- (GND) Plane - <b>Magnetic Flux Cancellation</b></div>
    </div>

    <div class="layer-box">
        <label style="color:var(--color-l3)"><input type="checkbox" id="btnL3" checked onchange="render()"> Layer 3 (Inner 2)</label>
        <input type="range" id="opL3" class="opacity-slider" min="0" max="100" value="40" oninput="render()">
        <div class="desc">Kelvin Return, Aux Power (+15V/-5V)</div>
    </div>

    <div class="layer-box">
        <label style="color:var(--color-l4)"><input type="checkbox" id="btnL4" checked onchange="render()"> Layer 4 (Bottom)</label>
        <input type="range" id="opL4" class="opacity-slider" min="0" max="100" value="30" oninput="render()">
        <div class="desc">Phase Node Expansion, Shielding</div>
    </div>

    <div class="layer-box">
        <label style="color:var(--color-silk)"><input type="checkbox" id="btnSilk" checked onchange="render()"> Silkscreen (Top)</label>
        <div class="desc">Component Outlines & Reference Designators</div>
    </div>

    <div style="margin-top:20px; font-size: 0.8em; color: #888;">
        * 중첩된 영역을 통해 <b>Loop Inductance</b> 최적화 상태를 확인하십시오.
    </div>
</div>

<div id="canvas-area">
    <svg width="800" height="600" viewBox="0 0 160 120" id="pcb-svg">
        <g id="L2" fill="var(--color-l2)">
            <path d="M 5 5 H 85 V 115 H 5 Z" fill-opacity="1" />
            <rect x="90" y="5" width="65" height="45" fill-opacity="0.5" /> <rect x="90" y="60" width="65" height="55" fill-opacity="0.5" /> </g>

        <g id="L4" fill="var(--color-l4)">
            <rect x="65" y="45" width="40" height="30" fill-opacity="0.8" /> <path d="M 5 80 H 60 V 110 H 5 Z" fill-opacity="0.4" /> </g>

        <g id="L3" stroke="var(--color-l3)" fill="none" stroke-width="1.2">
            <path d="M 125 28 L 108 28" /> 
            <path d="M 125 83 L 108 83" />
            <path d="M 140 10 L 140 40 M 140 70 L 140 105" stroke-dasharray="2,1" />
        </g>

        <g id="L1">
            <path d="M 5 10 H 60 V 40 H 85 V 20 H 100 V 40 H 5 Z" fill="var(--color-l1)" fill-opacity="0.7" />
            
            <path d="M 85 45 H 115 V 75 H 85 Z" fill="var(--color-l1)" fill-opacity="0.9" />

            <path d="M 125 25 L 108 25" stroke="var(--color-l1)" stroke-width="1" fill="none" />
            <path d="M 125 80 L 108 80" stroke="var(--color-l1)" stroke-width="1" fill="none" />
            
            <path d="M 5 80 H 60 V 110 H 85 V 90 H 100 V 110 H 5 Z" fill="var(--color-l1)" fill-opacity="0.7" />
        </g>

        <g id="Silk" stroke="var(--color-silk)" fill="none" stroke-width="0.3">
            <rect x="5" y="45" width="15" height="30" />
            <text x="6" y="43" fill="white" font-size="3" stroke="none">J1: DC INPUT</text>
            
            <circle cx="35" cy="30" r="7" /> <circle cx="35" cy="90" r="7" />
            <rect x="55" y="25" width="8" height="20" /> <rect x="55" y="75" width="8" height="20" />
            
            <g transform="translate(90, 20)">
                <rect x="0" y="0" width="16" height="20" stroke="#ffd700" stroke-width="0.5" />
                <circle cx="18" cy="5" r="0.8" fill="white" /> <circle cx="18" cy="8" r="0.8" fill="white" /> <circle cx="-2" cy="5" r="1.2" fill="white" /> <circle cx="-2" cy="15" r="1.2" fill="white" /> <text x="2" y="12" fill="white" font-size="3" stroke="none">Q1 (HS)</text>
            </g>

            <g transform="translate(90, 75)">
                <rect x="0" y="0" width="16" height="20" stroke="#ffd700" stroke-width="0.5" />
                <circle cx="18" cy="5" r="0.8" fill="white" />
                <circle cx="18" cy="8" r="0.8" fill="white" />
                <circle cx="-2" cy="5" r="1.2" fill="white" />
                <circle cx="-2" cy="15" r="1.2" fill="white" />
                <text x="2" y="12" fill="white" font-size="3" stroke="none">Q2 (LS)</text>
            </g>

            <rect x="130" y="20" width="12" height="15" /> <text x="130" y="18" fill="white" font-size="3" stroke="none">DRV1+RP1</text>
            <rect x="130" y="75" width="12" height="15" /> <text x="130" y="73" fill="white" font-size="3" stroke="none">DRV2+RP2</text>
            
            <circle cx="108" cy="28" r="0.5" fill="cyan" />
            <circle cx="108" cy="83" r="0.5" fill="cyan" />
        </g>
    </svg>
</div>

<script>
    function render() {
        const layers = ['L1', 'L2', 'L3', 'L4', 'Silk'];
        layers.forEach(l => {
            const el = document.getElementById(l);
            const btn = document.getElementById('btn' + l);
            const op = document.getElementById('op' + l);
            
            if (btn.checked) {
                el.style.display = 'inline';
                if (op) el.setAttribute('opacity', op.value / 100);
            } else {
                el.style.display = 'none';
            }
        });
    }
    render();
</script>
</body>
</html>
