<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>Expert PCB Placement Advisor</title>
    <style>
        body { background-color: #1a1a1a; color: #00ff00; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; display: flex; flex-direction: column; align-items: center; }
        .dashboard { display: flex; gap: 20px; margin: 20px; background: #2a2a2a; padding: 20px; border-radius: 12px; border: 1px solid #444; }
        canvas { background-color: #001a00; border: 2px solid #555; box-shadow: 0 10px 30px rgba(0,0,0,0.5); }
        .control-panel { width: 300px; }
        select, button { width: 100%; padding: 10px; margin: 10px 0; border-radius: 5px; border: none; font-weight: bold; }
        button { background: #cc6600; color: white; cursor: pointer; }
        .rule-box { background: #111; padding: 10px; font-size: 0.85rem; color: #00d4ff; border-left: 4px solid #00d4ff; }
    </style>
</head>
<body>

    <h2>PCB Layout Strategy Advisor (Layer Aware)</h2>

    <div class="dashboard">
        <div class="control-panel">
            <label>PCB Layer Ïàò ÏÑ§Ï†ï:</label>
            <select id="layerSelect">
                <option value="1">1 Layer (Single Side)</option>
                <option value="2" selected>2 Layers (Double Side)</option>
                <option value="4">4 Layers (Internal Plane)</option>
            </select>
            
            <button onclick="analyzeLayout()">Î∞∞Ïπò Î∞è Î∞∞ÏÑ† Î∂ÑÏÑù ÏãúÏûë</button>
            
            <div id="ruleInfo" class="rule-box">
                ÏÑ§Í≥Ñ Í∑úÏπô: Î†àÏù¥Ïñ¥ ÏÑ§Ï†ïÏóê Îî∞Îùº Î∞∞ÏÑ† ÏïåÍ≥†Î¶¨Ï¶òÏù¥ Î≥ÄÍ≤ΩÎê©ÎãàÎã§.
            </div>
        </div>

        <canvas id="pcbCanvas" width="600" height="400"></canvas>
    </div>

<script>
    const canvas = document.getElementById('pcbCanvas');
    const ctx = canvas.getContext('2d');
    const layerSelect = document.getElementById('layerSelect');
    const ruleInfo = document.getElementById('ruleInfo');

    const COLORS = {
        top: '#ff3333',     // Top Layer (Red)
        bottom: '#3333ff',  // Bottom Layer (Blue)
        pad: '#ffcc00',
        silk: '#ffffff',
        board: '#002200'
    };

    function init() {
        ctx.fillStyle = COLORS.board;
        ctx.fillRect(0, 0, canvas.width, canvas.height);
        drawGrid();
    }

    function drawGrid() {
        ctx.strokeStyle = "#003300";
        for(let i=0; i<canvas.width; i+=25) {
            ctx.beginPath(); ctx.moveTo(i,0); ctx.lineTo(i,400); ctx.stroke();
            ctx.beginPath(); ctx.moveTo(0,i); ctx.lineTo(600,i); ctx.stroke();
        }
    }

    function analyzeLayout() {
        init();
        const layers = parseInt(layerSelect.value);
        
        // 1. Ï†ÑÎ¨∏Í∞ÄÏùò Î†àÏù¥Ïñ¥Î≥Ñ Ï†ÑÎûµ Ï†ïÏùò
        let strategy = "";
        if(layers === 1) {
            strategy = "‚ö†Ô∏è 1Ï∏µ ÏÑ§Í≥Ñ: Î∞∞ÏÑ† ÍµêÏ∞® Î∂àÍ∞ÄÎä•. Î∂ÄÌíàÏùÑ ÏùºÏßÅÏÑ†ÏúºÎ°ú Î∞∞ÏπòÌïòÏó¨ LoopÎ•º ÏµúÏÜåÌôîÌï©ÎãàÎã§.";
            renderSingleLayer();
        } else if(layers === 2) {
            strategy = "‚úÖ 2Ï∏µ ÏÑ§Í≥Ñ: ViaÎ•º ÏÇ¨Ïö©Ìï¥ BottomÏúºÎ°ú Ïö∞Ìöå Í∞ÄÎä•. Ïã†Ìò∏ÏÑ†ÏùÄ Top, GNDÎäî Bottom Í∂åÏû•.";
            renderDoubleLayer();
        } else {
            strategy = "üöÄ 4Ï∏µ ÏÑ§Í≥Ñ: ÎÇ¥Î∂Ä 2/3Ï∏µÏùÑ GND/VCC PlaneÏúºÎ°ú ÏÇ¨Ïö©. EMI ÏµúÏ†ÅÌôî Î™®Îìú ÏûëÎèô.";
            renderMultiLayer();
        }
        ruleInfo.innerText = strategy;
    }

    function drawComponent(x, y, label, type) {
        ctx.strokeStyle = COLORS.silk;
        ctx.lineWidth = 1;
        if(type === 'res') ctx.strokeRect(x-25, y-10, 50, 20);
        else if(type === 'conn') ctx.strokeRect(x-15, y-30, 30, 60);
        
        ctx.fillStyle = COLORS.pad;
        ctx.fillRect(x-20, y-5, 10, 10);
        ctx.fillRect(x+10, y-5, 10, 10);
        
        ctx.fillStyle = COLORS.silk;
        ctx.font = "12px Arial";
        ctx.fillText(label, x-20, y-15);
    }

    // 1Ï∏µ Î∞∞ÏÑ†: Í≤πÏπòÏßÄ ÏïäÍ≤å ÏµúÎåÄÌïú Îã®ÏàúÌôî
    function renderSingleLayer() {
        drawComponent(100, 200, "J1", "conn");
        drawComponent(300, 200, "R1", "res");
        drawComponent(500, 200, "LED", "res");

        // Î∞∞ÏÑ† (Only Top)
        ctx.strokeStyle = COLORS.top;
        ctx.lineWidth = 4;
        ctx.beginPath();
        ctx.moveTo(110, 200); ctx.lineTo(280, 200); // J1 to R1
        ctx.moveTo(320, 200); ctx.lineTo(480, 200); // R1 to LED
        ctx.stroke();
    }

    // 2Ï∏µ Î∞∞ÏÑ†: ÏùòÎèÑÏ†ÅÏúºÎ°ú Í≤πÏπòÎäî Í≤ΩÎ°úÎ•º ÎßåÎì§Ïñ¥ Bottom(ÌååÎûë) ÌôúÏö© Î≥¥Ïó¨Ï£ºÍ∏∞
    function renderDoubleLayer() {
        drawComponent(100, 150, "J1", "conn");
        drawComponent(300, 250, "R1", "res"); // ÏóáÍ∞àÎ¶∞ Î∞∞Ïπò

        // Top Trace
        ctx.strokeStyle = COLORS.top;
        ctx.beginPath();
        ctx.moveTo(110, 150); ctx.lineTo(200, 150);
        ctx.stroke();

        // Via ÌëúÌòÑ
        ctx.fillStyle = "#ffffff";
        ctx.beginPath(); ctx.arc(200, 150, 5, 0, Math.PI*2); ctx.fill();

        // Bottom Trace (Ïö∞Ìöå)
        ctx.strokeStyle = COLORS.bottom;
        ctx.beginPath();
        ctx.moveTo(200, 150); ctx.lineTo(200, 250); ctx.lineTo(280, 250);
        ctx.stroke();
    }

    function renderMultiLayer() {
        renderSingleLayer(); // Í∏∞Î≥∏ Î∞∞ÏÑ† ÌõÑ
        // GND Plane ÏãúÍ∞ÅÌôî (Î∞òÌà¨Î™Ö)
        ctx.fillStyle = "rgba(51, 51, 255, 0.2)";
        ctx.fillRect(50, 50, 500, 300);
        ctx.fillStyle = COLORS.silk;
        ctx.fillText("Internal GND Plane Active", 230, 370);
    }

    window.onload = init;
</script>
</body>
</html>
