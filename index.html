<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>Realistic Half-Bridge PCB Layout Visualizer</title>
    <style>
        body { font-family: 'Segoe UI', 'Noto Sans KR', sans-serif; display: flex; flex-direction: column; align-items: center; background-color: #2c3e50; color: #ecf0f1; }
        #app-container { display: flex; gap: 30px; padding: 30px; background: #34495e; border-radius: 15px; margin-top: 30px; box-shadow: 0 15px 40px rgba(0,0,0,0.6); }
        .controls { width: 320px; display: flex; flex-direction: column; gap: 20px; background: rgba(0,0,0,0.25); padding: 20px; border-radius: 10px; }
        .pcb-canvas { background: #1a1a1a; border: 3px solid #555; border-radius: 8px; position: relative; width: 700px; height: 500px; overflow: hidden; }
        svg { width: 100%; height: 100%; }
        .layer-control { display: flex; align-items: center; justify-content: space-between; }
        input[type="range"] { width: 120px; cursor: pointer; }
        input[type="checkbox"] { cursor: pointer; transform: scale(1.2); }
        h2 { margin: 10px 0 15px 0; font-size: 1.4em; color: #ecf0f1; border-bottom: 2px solid #7f8c8d; padding-bottom: 10px; }
        .legend { font-size: 0.9em; margin-top: 15px; line-height: 1.8; background: rgba(255,255,255,0.05); padding: 15px; border-radius: 8px; }
        .legend strong { color: #f1c40f; }
        .desc { max-width: 900px; margin-top: 30px; line-height: 1.7; color: #bdc3c7; background: #34495e; padding: 25px; border-radius: 15px; }
        .desc h3 { color: #e67e22; border-bottom: 1px solid #e67e22; padding-bottom: 10px; display: inline-block; }
        span.color-box { display: inline-block; width: 14px; height: 14px; border-radius: 3px; margin-right: 8px; vertical-align: middle; border: 1px solid rgba(255,255,255,0.3); }
        /* SVG Text Styles */
        .pin-label { font-size: 9px; fill: #bdc3c7; }
        .comp-label { font-size: 11px; fill: #ecf0f1; font-weight: bold; }
    </style>
</head>
<body>

<h1>High-Voltage Half-Bridge PCB Layout Strategy (TO-247-4)</h1>

<div id="app-container">
    <div class="controls">
        <h2>Layer Visibility Control</h2>
        <div class="layer-control">
            <label><span class="color-box" style="background:#e74c3c"></span>L1 (Top: Power+)</label>
            <input type="checkbox" id="l1-vis" checked>
            <input type="range" id="l1-op" min="0" max="1" step="0.1" value="0.9">
        </div>
        <div class="layer-control">
            <label><span class="color-box" style="background:#3498db"></span>L2 (Inner1: GND Plane)</label>
            <input type="checkbox" id="l2-vis" checked>
            <input type="range" id="l2-op" min="0" max="1" step="0.1" value="0.5">
        </div>
        <div class="layer-control">
            <label><span class="color-box" style="background:#2ecc71"></span>L3 (Inner2: Signals)</label>
            <input type="checkbox" id="l3-vis">
            <input type="range" id="l3-op" min="0" max="1" step="0.1" value="0.4">
        </div>
        <div class="layer-control">
            <label><span class="color-box" style="background:#9b59b6"></span>L4 (Bottom: Misc)</label>
            <input type="checkbox" id="l4-vis">
            <input type="range" id="l4-op" min="0" max="1" step="0.1" value="0.4">
        </div>

        <h2>Design Key Points</h2>
        <div class="legend">
            <strong>1. TO-247-4 Footprint:</strong> ì‹¤ì œ í•€ ë°°ì—´(G-KS-S-D ì¼ë ¬ ë°°ì¹˜) ë°˜ì˜.<br>
            <strong>2. Sandwich Structure:</strong> L1(ì ìƒ‰)ì˜ ë„“ì€ ë²„ìŠ¤ë°” ë°‘ì— L2(ì²­ìƒ‰) GND í†µíŒì„ ê¹”ì•„ ì¸ë•í„´ìŠ¤ ìƒì‡„.<br>
            <strong>3. Minimized V_SW Area:</strong> HS Sourceì™€ LS Drain ì‚¬ì´ ì—°ê²° ë…¸ë“œ(í™©ìƒ‰) ë©´ì  ê·¹ì†Œí™”.<br>
            <strong>4. Critical Loop:</strong> MLCC â†’ HS MOSFET â†’ LS MOSFET â†’ MLCC ë£¨í”„ ìµœë‹¨ ê±°ë¦¬ ë°°ì¹˜.
        </div>
    </div>

    <div class="pcb-canvas">
        <svg id="pcb-svg" viewBox="0 0 700 500">
            <rect x="10" y="10" width="680" height="480" fill="#222f3e" stroke="#7f8c8d" stroke-width="3" rx="10" ry="10" />
            
            <g id="layer-l2" opacity="0.5">
                <rect x="30" y="30" width="640" height="440" fill="#3498db" rx="5" ry="5" />
                <text x="50" y="60" fill="white" font-size="14" font-weight="bold">L2: SOLID GND PLANE (Image Plane)</text>
                <circle cx="522" cy="350" r="5" fill="#2c3e50" stroke="#3498db" stroke-width="2"/>
                 <text x="530" y="355" fill="#ecf0f1" font-size="10">Via to LS Source</text>
            </g>

            <g id="layer-l1" opacity="0.9">
                <g transform="translate(50, 200)">
                    <rect x="0" y="-20" width="40" height="40" fill="#95a5a6" stroke="#7f8c8d" />
                    <circle cx="20" cy="0" r="8" fill="#c0392b" />
                    <text x="5" y="-25" class="comp-label">VDC+ Input (M5)</text>
                    
                    <circle cx="100" cy="0" r="35" fill="#34495e" stroke="#c0392b" stroke-width="4" />
                    <text x="75" y="-45" class="comp-label">Bulk Cap (Electrolytic)</text>
                    <text x="90" y="5" fill="#c0392b" font-size="20" font-weight="bold">+</text>
                </g>

                <path d="M 70 200 L 150 200 L 300 150 L 560 150 L 560 180 L 320 180 L 70 220 Z" fill="#e74c3c" stroke="#c0392b" stroke-width="2"/>
                <text x="180" y="195" fill="white" font-size="12" font-weight="bold">L1: VDC+ Busbar (Sandwiched over L2)</text>

                <g transform="translate(340, 150)">
                    <rect x="0" y="-15" width="40" height="30" fill="#e74c3c" stroke="#fff" stroke-width="2" />
                    <text x="2" y="-20" class="comp-label">HF MLCC</text>
                    <circle cx="35" cy="0" r="3" fill="#3498db" stroke="#fff"/>
                </g>

                <g transform="translate(450, 120)">
                    <rect x="0" y="0" width="110" height="60" fill="rgba(44, 62, 80, 0.8)" stroke="#ecf0f1" stroke-width="2"/>
                    <text x="10" y="20" class="comp-label">HS MOSFET (TO-247-4)</text>
                    <g transform="translate(15, 45)">
                        <circle cx="0" cy="0" r="5" fill="#f1c40f" /><text x="-5" y="15" class="pin-label">1(G)</text>
                        <circle cx="25" cy="0" r="5" fill="#2ecc71" /><text x="18" y="15" class="pin-label">2(KS)</text>
                        <circle cx="50" cy="0" r="5" fill="#e67e22" /><text x="45" y="15" class="pin-label">3(S)</text>
                        <circle cx="75" cy="0" r="7" fill="#e74c3c" stroke="#fff" stroke-width="2"/><text x="70" y="15" class="pin-label">4(D)</text>
                    </g>
                </g>

                <path d="M 500 165 L 500 250 L 525 320" fill="none" stroke="#f39c12" stroke-width="18" stroke-linecap="round" />
                <text x="520" y="240" fill="#f39c12" font-size="14" font-weight="bold">V_SW Node (Minimize Area!)</text>

                <g transform="translate(450, 320)">
                    <rect x="0" y="0" width="110" height="60" fill="rgba(44, 62, 80, 0.8)" stroke="#ecf0f1" stroke-width="2"/>
                    <text x="10" y="50" class="comp-label">LS MOSFET (TO-247-4)</text>
                    <g transform="translate(15, 15)">
                        <circle cx="0" cy="0" r="5" fill="#f1c40f" /><text x="-5" y="-8" class="pin-label">1(G)</text>
                        <circle cx="25" cy="0" r="5" fill="#2ecc71" /><text x="18" y="-8" class="pin-label">2(KS)</text>
                        <circle cx="50" cy="0" r="7" fill="#3498db" stroke="#fff" stroke-width="2"/><text x="45" y="-8" class="pin-label">3(S)</text>
                        <circle cx="75" cy="0" r="5" fill="#f39c12" /><text x="70" y="-8" class="pin-label">4(D)</text>
                    </g>
                </g>
            </g>

            <g id="layer-l3" opacity="0" display="none"><text x="50" y="450" fill="#2ecc71">L3 Placeholder</text></g>
            <g id="layer-l4" opacity="0" display="none"><text x="50" y="470" fill="#9b59b6">L4 Placeholder</text></g>
        </svg>
    </div>
</div>

<div class="desc">
    <h3>ğŸ’¡ êµìˆ˜ë‹˜ ê°€ì´ë“œ (ê°•ì˜ í¬ì¸íŠ¸):</h3>
    <ul>
        <li><strong>í˜„ì‹¤ì ì¸ TO-247 í•€ ë°°ì¹˜:</strong> ê° MOSFETì˜ í•€ì´ <code>1(G) - 2(KS) - 3(S) - 4(D)</code> ìˆœì„œë¡œ ì¼ë ¬ ë°°ì¹˜ëœ ê²ƒì„ í™•ì¸ì‹œí‚¤ì„¸ìš”. ì´ ë¬¼ë¦¬ì  ë°°ì¹˜ê°€ ë¼ìš°íŒ…ì˜ ì œì•½ ì¡°ê±´ì´ ë©ë‹ˆë‹¤.</li>
        <li><strong>L1 & L2 ìƒŒë“œìœ„ì¹˜ í™•ì¸:</strong> 'L1(Top)'ì˜ íˆ¬ëª…ë„ë¥¼ ì¡°ì ˆí•´ ë³´ì„¸ìš”. ë¶‰ì€ìƒ‰ VDC+ ë²„ìŠ¤ë°” ë°”ë¡œ ì•„ë˜ì— íŒŒë€ìƒ‰ GND í†µíŒ(L2)ì´ ê¹”ë ¤ìˆëŠ” ê²ƒì´ ë³´ì´ì‹œë‚˜ìš”? ì´ êµ¬ì¡°ê°€ í•µì‹¬ì…ë‹ˆë‹¤.</li>
        <li><strong>íŒŒì›Œ ë£¨í”„ ì¶”ì :</strong> ì „ë¥˜ì˜ íë¦„ì„ ë”°ë¼ê°€ ë³´ì„¸ìš”. <code>ì…ë ¥ M5 â†’ MLCC â†’ ìƒë‹¨ FET ë“œë ˆì¸(4ë²ˆ) â†’ ìƒë‹¨ FET ì†ŒìŠ¤(3ë²ˆ) â†’ í•˜ë‹¨ FET ë“œë ˆì¸(4ë²ˆ) â†’ í•˜ë‹¨ FET ì†ŒìŠ¤(3ë²ˆ) â†’ GND â†’ MLCC</code>ë¡œ ëŒì•„ì˜¤ëŠ” ì´ ë£¨í”„ì˜ ë¬¼ë¦¬ì  ë©´ì ì´ ì‘ì„ìˆ˜ë¡ ì¢‹ì€ ì„¤ê³„ì…ë‹ˆë‹¤.</li>
        <li><strong>Switching Node (í™©ìƒ‰):</strong> ìƒë‹¨ ì†ŒìŠ¤ì™€ í•˜ë‹¨ ë“œë ˆì¸ì„ ì‡ëŠ” ë‘êº¼ìš´ í™©ìƒ‰ ì„ ì´ ë³´ì´ì‹œì£ ? ì´ ë¶€ë¶„ì€ ì „ì••ì´ 0V~300Vë¡œ ë‚ ë›°ëŠ” ê³³ì…ë‹ˆë‹¤. ì´ ë©´ì ì„ ìµœì†Œí™”í•´ì•¼ ë…¸ì´ì¦ˆë¥¼ ì¤„ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</li>
    </ul>
</div>

<script>
    const layers = ['l1', 'l2', 'l3', 'l4'];
    layers.forEach(l => {
        const checkbox = document.getElementById(`${l}-vis`);
        const slider = document.getElementById(`${l}-op`);
        const group = document.getElementById(`layer-${l}`);

        if(checkbox && slider && group) {
            checkbox.addEventListener('change', () => {
                group.style.display = checkbox.checked ? 'inline' : 'none';
            });
            slider.addEventListener('input', () => {
                group.setAttribute('opacity', slider.value);
            });
            // ì´ˆê¸° ìƒíƒœ ë™ê¸°í™”
            group.style.display = checkbox.checked ? 'inline' : 'none';
            group.setAttribute('opacity', slider.value);
        }
    });
</script>

</body>
</html>
